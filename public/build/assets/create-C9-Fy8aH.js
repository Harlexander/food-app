import{u as P,r as A,j as e,H as L,L as N,a as B}from"./app-BAneUQwC.js";import{C as p,a as g,d as u,c as j}from"./card-B-nA3O1-.js";import{a as D,B as c}from"./createLucideIcon-BVayKEp4.js";import{I as m}from"./input-BsWteuUj.js";import{L as l,I as n}from"./label-C4Xd3yHw.js";import{S as E,a as H,b as T,c as q,d as G}from"./select-BfmI-9cL.js";import{C as R}from"./checkbox-CTZWgO4R.js";import{A as U,d as x}from"./app-layout-CGLbnTF_.js";import{d as M}from"./index-BSLCtOS3.js";import{A as V}from"./arrow-left-AO7U0O-1.js";import{P as $,T as J}from"./trash-2-DPZolJmL.js";import{X as O}from"./index-CyMBttis.js";/* empty css            */import"./index-DrGh10Ja.js";import"./index-8bLMKSJb.js";import"./index-DAfQbzEK.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],y=D("Upload",X),K=[{title:"Dashboard",href:M().url},{title:"Foods",href:x.foods().url},{title:"Add Food",href:"/dashboard/foods/create"}];function xe({categories:C}){const{data:a,setData:o,post:_,processing:r,errors:d}=P({name:"",description:"",image:null,category:"",is_active:!0,sort_order:0,portion_sizes:[]}),[h,f]=A.useState(null),w=s=>{const i=s.target.files?.[0];if(i){o("image",i);const t=new FileReader;t.onloadend=()=>{f(t.result)},t.readAsDataURL(i)}},z=()=>{o("image",null),f(null)},F=()=>{o("portion_sizes",[...a.portion_sizes,{size_name:"",price:0,sort_order:a.portion_sizes.length}])},S=s=>{o("portion_sizes",a.portion_sizes.filter((i,t)=>t!==s))},v=(s,i,t)=>{o("portion_sizes",a.portion_sizes.map((b,k)=>k===s?{...b,[i]:t}:b))},I=s=>{s.preventDefault(),_("/dashboard/foods",{forceFormData:!0,onSuccess:()=>{B.visit(x.foods().url)}})};return e.jsxs(U,{breadcrumbs:K,children:[e.jsx(L,{title:"Add New Food"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{href:x.foods().url,children:e.jsxs(c,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Back"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Add New Food"}),e.jsx("p",{children:"Create a new food item for your menu"})]})]}),e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs(p,{className:"border-0 shadow-sm",children:[e.jsx(g,{children:e.jsx(u,{className:"text-lg font-semibold",children:"Basic Information"})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:"Food Name *"}),e.jsx(m,{id:"name",value:a.name,onChange:s=>o("name",s.target.value),required:!0,disabled:r}),e.jsx(n,{message:d.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"category",children:"Category *"}),e.jsxs(E,{value:a.category,onValueChange:s=>o("category",s),children:[e.jsx(H,{id:"category",disabled:r,children:e.jsx(T,{placeholder:"Select category"})}),e.jsx(q,{children:C.map(s=>e.jsx(G,{value:s,children:s},s))})]}),e.jsx(n,{message:d.category})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",rows:3,value:a.description,onChange:s=>o("description",s.target.value),className:"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50",disabled:r}),e.jsx(n,{message:d.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"sort_order",children:"Sort Order"}),e.jsx(m,{id:"sort_order",type:"number",value:a.sort_order,onChange:s=>o("sort_order",parseInt(s.target.value)||0),min:"0",disabled:r}),e.jsx(n,{message:d.sort_order})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(R,{id:"is_active",checked:a.is_active,onCheckedChange:s=>o("is_active",!!s),disabled:r}),e.jsx(l,{htmlFor:"is_active",className:"cursor-pointer",children:"Active (visible to customers)"})]})]})]})]}),e.jsxs(p,{className:"border-0 shadow-sm",children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{className:"text-lg font-semibold",children:"Portion Sizes"}),e.jsxs(c,{type:"button",variant:"outline",size:"sm",onClick:F,disabled:r,className:"gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Add Size"]})]})}),e.jsxs(j,{children:[e.jsx("div",{className:"space-y-3",children:a.portion_sizes.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:'No portion sizes. Click "Add Size" to add one.'}):a.portion_sizes.map((s,i)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{className:"text-xs",children:"Size Name"}),e.jsx(m,{value:s.size_name,onChange:t=>v(i,"size_name",t.target.value),placeholder:"e.g., Large Cooler",disabled:r,required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{className:"text-xs",children:"Price ($)"}),e.jsx(m,{type:"number",step:"0.01",min:"0",value:s.price,onChange:t=>v(i,"price",parseFloat(t.target.value)||0),placeholder:"0.00",disabled:r,required:!0})]})]}),e.jsx(c,{type:"button",variant:"outline",size:"icon",onClick:()=>S(i),disabled:r,className:"text-red-600 hover:text-red-700",children:e.jsx(J,{className:"h-4 w-4"})})]},i))}),d.portion_sizes&&e.jsx(n,{message:d.portion_sizes})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(p,{className:"border-0 shadow-sm",children:[e.jsx(g,{children:e.jsx(u,{className:"text-lg font-semibold",children:"Food Image"})}),e.jsxs(j,{className:"space-y-4",children:[h?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative aspect-video w-full overflow-hidden rounded-lg border",children:[e.jsx("img",{src:h,alt:"Preview",className:"h-full w-full object-cover"}),e.jsx(c,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:z,disabled:r,children:e.jsx(O,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:a.image?.name||"Image selected"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"image",className:"flex h-48 cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 hover:border-gray-400",children:[e.jsx(y,{className:"mb-2 h-8 w-8 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Click to upload"}),e.jsx("span",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 2MB"})]}),e.jsx("input",{id:"image",type:"file",accept:"image/*",onChange:w,className:"hidden",disabled:r})]}),!h&&e.jsxs(c,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("image")?.click(),disabled:r,className:"w-full gap-2",children:[e.jsx(y,{className:"h-4 w-4"}),"Choose Image"]}),e.jsx(n,{message:d.image})]})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(N,{href:x.foods().url,children:e.jsx(c,{type:"button",variant:"outline",disabled:r,className:"flex-1",children:"Cancel"})}),e.jsx(c,{type:"submit",disabled:r||a.portion_sizes.length===0||!a.name||!a.category,className:"flex-1 bg-green-500 text-white hover:bg-green-600",children:r?"Creating...":"Create Food"})]})]})]})]})}export{xe as default};
